<!DOCTYPE html>
<meta charset="utf-8">
<style>
.myribbon {
  padding: 10px 0;
  font-family: 'Helvetica Neue', sans-serif;
  background: pink;
}
</style>
<title>CSS Ribbonator</title>
<span data-ribbonate="top right" class="myribbon">I am at top right and long</span>
<span data-ribbonate="top left" class="myribbon">I am at top left</span>
<span data-ribbonate="bottom left" class="myribbon">I am at bottom left</span>
<span data-ribbonate="bottom right" class="myribbon">I am at bottom right</span>

<script>
(function() {
  function $(sel) { return array(document.querySelectorAll(sel)); }

  function array(arrayLike) { return [].slice.call(arrayLike); }

  function setVendorPrefix(el, prop, value) {
    ['-o-', '-moz-', '-webkit-', ''].forEach(function(prefix) {
      var prefixedProp = prefix + prop;
      if (prefixedProp in el.style) el.style[prefixedProp] = value;
    });
  }

  window.addEventListener('load', function() {
    $('[data-ribbonate]').forEach(function(el) {
      var position = el.getAttribute('data-ribbonate').split(' ');
      var elRect = el.getBoundingClientRect();
      var style = window.getComputedStyle(el);
      var square = document.createElement('div');
      var squareSide = elRect.width * 1.2;
      var ribbonWidth = 2 * squareSide;
      var rotation = 45;
      var translation = elRect.height/2;

      square.style.position = "absolute";
      square.style.overflow = "hidden";

      if (position[0] == "top") {
        square.style.top = "0";
        rotation *= position[1] == "left" ? -1 : 1;
        translation *= -1;
      } else {
        square.style.bottom = "0";
        rotation *= position[1] == "left" ? 1 : -1;
        translation *= 1;
      }

      if (position[1] == "left") {
        square.style.left = "0";
      } else {
        square.style.right = "0";
      }

      square.style.width = square.style.height = squareSide + "px";

      el.parentNode.replaceChild(square, el);
      square.appendChild(el);

      el.style.position = "absolute";
      el.style.top = (squareSide/2 - elRect.height/2) + "px";
      el.style.left = (-(ribbonWidth-squareSide)/2) + "px";
      el.style.textAlign = "center";
      el.style.width = ribbonWidth + "px";
      setVendorPrefix(el, "transform", "rotate(" + rotation + "deg) " +
                                       "translateY(" + translation + "px)");
    });
  }, false);
})();
</script>
